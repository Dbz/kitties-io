<div>
	<p class='red' id='signin-errors'><br></p>
</div>
<form id='signin-form' method='post'>
	<input type='hidden' name='authenticity_token' value='<%= form_authenticity_token %>'>
	<div class='form-group'>
		<label for='username'>Username</label>
		<input type='text' name='user[username]' id='username'
		class='form-control' place-holder='Enter Username'>
	</div>
	<div class='form-group'>
		<label for='password'>Password</label>
		<input type='password' name='user[password]' id='username'
		class='form-control' place-holder='Password'>
	</div>
	<button type='submit' class='btn btn-primary'>Log In!</button>
</form>

<script type="text/javascript">
	$(function () {
		$('#signin-form').on('submit', function (event) {
			event.preventDefault();
      $.ajax({
      	url: '/api/sessions',
				data: $(event.currentTarget).serialize(),
				type: "POST",
				success: function (data) {
					$('#auth-modal').modal('hide')
					window.Kitties.user = new Kitties.Models.User({ id: data.id });
					window.Kitties.cart.fetch();
				},
				error: function (resp) {
					$('#signin-errors').text(resp.responseJSON)
				},
      })
		})
	})
</script>